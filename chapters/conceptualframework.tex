% las imágenes son díficiles de ser interpretadas
\chapter{Marco teórico}

\section{Imágenes médicas}
La unidad básica de una imagen es el pixel, imagen, escala de grises,
procesamiento de imágenes, procesamiento de imágenes médicas

\subsection{MRI, CT, X-ray}

\section{DICOM}
Mencionar DICOMDIR aquí.
DICOM es el estándar en las imágenes médicas, fue desarrollado por la ACR en
conjunto con NEMA \cite{acrnema, pianykh2011digital}.

\subsection{Estructura de un archivo DICOM}
Mencionar las etiquetas.

\subsection{Mamogramas}
A lo largo de este trabajo los términos mamografía, mastografía y mamograma
serán usados indistintamente. 

Un mamograma típicamente tiene de 12 a 16 bits de profundidad, con una
resolución de 4000x5000 pixeles [13], [14].  

Mammography is radiographic examination that is designed for detecting breast
pathology, particularly breast cancer. [11]

alta resolución y baja radiación.

% --------------------
\subsection{Cáncer de mama} % buscar un mejor subtítulo
El cáncer de mama es un padecimiento en el que se desarrollan células malignas
en los tejidos de la mama. Nuevas células se forman cuando el cuerpo no las
necesita. 

\subsection{Proceso de formación de una mamografía}

Consideraciones técnicas avanzadas de cómo se obtiene un mamograma están fuera
del alcance de este trabajo. Obtener una imagen mamográfica es un desafío
debido a que la mama está constituida por tejidos similares entre sí y porque
las lesiones buscadas por el radiólogo que indicarían la presencia de un tumor
son pequeñas o similares al tejido normal \cite{mxcancer}. Las mamografías son
imágenes obtenidas al exponer la mama a una dosis leve de rayos X. Los
mastógrafos disponen de un receptor que captura ...

%In screening mammography, as practiced in
%USA, (also in Mexico), two x-ray images of each breast, in the medio lateral
%oblique and craniocaudal views, are acquired. 

\subsection{Lesiones comunes}

%Mammographic features characteristic of breast cancer are masses, particularly
%ones with irregular or “spiculated” margins; clusters of microcalcifications
%(tiny deposits of calcium); and architectural distortions of breast structures. 

\subsection{Preprocesamiento}
El preprocesamiento es la etapa previa al procesamiento de imágenes \textit{per
se}, el principal objetivo de esta etapa es mejorar la calidad de la imagen
para que quede lista para su posterior procesamiento \cite{ponraj2011survey}
que muchas veces son algoritmos para un sistema CAD (Computer Aided Diagnosis).
El preprocesamiento también se utiliza para mejorar la visibilidad del
observador \cite{rahmati2010new}. 

\subsubsection{Preprocesamiento de mamografías}
El preprocesamiento de mamografías es especial porque no es como los otros tipos
de preprocesamiento, hay preprocesamiento específico para mamogramas.

\section{Ruido}

\subsection{Ruido en mamografías}

Noise in digital mammographies (Practical digital mammography by Beverly
Hashimoto) De acuerdo a Hachimoto en las imágenes mamográficas tenemos cuatro
tipos de ruido:

\begin{enumerate}
    \item Ruido cuántico.
    \item fixed electronic
    \item señales secundarías
    \item quanta secundario indirecto
\end{enumerate}

\section{Histogramas}
Los histogramas son distribuciones de frecuencia, 

Histograms are frequency distributions, and histograms of images describe the
frequency of the intensity values that occur in an image [9]. Image histogram
offers a graphical representation of the tonal distribution of values in a
digital image [10].

% --------------------

Many studies show that the histogram equalization is an effective method for
improving the quality of medical images. [6, 8]. 

\section{Bits de profundidad}

12-bit image (4096 levels of gray) displayed with 16 allocated bits appears
dark. This happens because the maximal possible amplitude of 12-bit image for
each pixel is 4095 and the maximal amplitude that can be displayed is 65535 (16
allocated bits). Therefore, 4096 levels need to be linearly scaled to 65536
levels to achieve good image displaying [8].

\section{Trabajos relacionados}

% Other databases
Existen múltiples bases de datos, públicas o privadas, utilizadas en estudios
relacionados a la detección del cáncer de mama. Las características de ellas
son diferentes. En la Tabla \ref{table:overviewdb} se muestran algunas de ellas.

MIAS \cite{sucklingmini} aunque es el recurso más viejo, sigue siendo
ampliamente utilizado. MIAS no tiene soporte actualmente. DDSM
\cite{heath2000digital} es el recurso más utilizado. Es importante notar la
presencia de dos recursos latinoamericanos, más específicamente, brasileños.

IRMA \cite{doi:10.1117/12.770325} ...

MIRaCLe (Mammography Image reading for Radiologists and Computers Learning
Database) es un repositorio dinámico para el entrenamiento y evaluación de
computadoras y radiólogos \cite{antoniou2009web}. MIRaCLe cuenta con un sistema
web que provee dos servicios: \textit{Software de Clasificación y Evaluación},
donde el usuario puede realizar consultas, visualizar y escoger diferentes
imágenes para probar algoritmos CAD y el \textit{Evaluación de Radiólogos}, que
provee funcionalidades para evaluar el desempeño de un radiólogo.

MIDAS (Mammographic Image Database for Automated Analysis) es una base de datos
con muestras tomadas entre la población femenina en Brasil
\cite{fernandes2012midas}. 

inbreast: \cite{moreira2012inbreast}, 
 openweb: \cite{matheus2011online}.

\afterpage{
    \clearpage
\begin{landscape}
%\begin{sidewaystable}
\begin{table}[h]
  \caption{Algunas bases de datos de mamografías digitales} 
  \label{table:overviewdb}
\begin{center}
{\small
    \begin{tabular}
    {c| >{\centering\arraybackslash}m{1in} | >{\centering\arraybackslash}m{1in}|c| 
    >{\centering\arraybackslash}m{0.6in} | >{\centering\arraybackslash}m{0.6in} |c|c|c}
    \hline

    {\bf Nombre} & 
    {\bf Número de casos} & 
    {\bf Número de imágenes} & 
    {\bf Proyecciones} & 
    {\bf Tipo de archivo} & 
    {\bf Lugar de origen} & 
    {\bf Año} &
    {\bf ACR} & 
    {\bf BIRADS} \\
    \hline
    mini-MIAS & 161  & 322    & MLO       & PGM   & Reino Unido    & 1994 & ACR & yes \\
    DDSM      & 2620 & 10480  & MLO \& CC & LJPEG & Estados Unidos & 1999 & ACR & yes \\
    BancoWeb  & 2620 & 10480  & MLO \& CC & LJPEG & Brasil         & 1999 & ACR & yes \\
    InBreast  & 2620 & 10480  & MLO \& CC & DICOM & Portugal       & 1999 & ACR & yes \\
    MIDAS     & 100  & 600    & MLO \& CC & LJPEG & Brasil         & 1999 & ACR & yes \\
    IRMA      & -    & 10'509 & MLO \& CC & LJPEG & Alemania       & 2008 & ACR & yes \\
    MIRaCLe   & 196  & 10480  & MLO \& CC & LJPEG & Grecia         & 2009 & ACR & yes \\
    \hline
    \end{tabular}
}
\end{center}
\end{table}
%\end{sidewaystable}
\end{landscape}
} % end of afterpage

% Preprocessing related works
Una gran cantidad de trabajos de investigación se han desarrollado en el
campo del preprocesamiento de imágenes mamográficas. En esta sección se revisan
varios enfoques expuestos en la literatura existente, algunos de los cuales se
rescataron en este trabajo para crear un método híbrido que combina las
fortalezas de estos. 

El preprocesamiento de mamogramas engloba algunas tareas también válidas en
el preprocesamiento de otro tipo de imágenes médicas como remoción de ruido,
mejora de contraste o reducción del área de trabajo, no obstante, también
existe el \textit{preprocesamiento orientado a mamografías} que comprende
tareas como orientación de la dirección de la mama, la supresión del músculo
pectoral o la detección del pezón.

%\subsection{Remoción del músculo pectoral}

El trabajo de Maitra utiliza un método híbrido -mixto- de tres fases
\cite{maitra2012technique}. La fase inicial es la mejora de contraste con el
algoritmo CLAHE, después se aisla el músculo pectoral de la región de interés y
finalmente se suprime utilizando el algoritmo \textit{seeding region growing}.
El -enfoque- de Maitra es interesante, pues su método es orientado a
mamografías. Su método pudo aislar el músculo pectoral en la mayoría de las
imágenes de miniMIAS.

Akram también propone la remoción del músculo pectoral además de etiquetas y
artefactos \cite{akram2013preprocessing}. Su propuesta utiliza el método de
contorno activo. 

Por su parte Mirzaalian \cite{mirzaalian2007pre} plantea un algoritmo para la
extracción del contorno de la mama y otro para la extracción del músculo
pectoral. Para extraer el contorno de la mama utiliza en conjunto la
ecualización de histogramas, una técnica de -convolución- con una máscara, que
sirve como un filtro de paso bajo, binarización y -labeling-, 

%\subsection{Mejora de contraste}

Otros trabajos como el de Rahmati \cite{rahmati2010new} concentran su atención en
mejorar una sola tarea. Este trabajo propone una versión mejorada de CLAHE:
FCLAHE. Su método trabaja las desventajas de CLAHE, que mejora el -frente- y el
-fondo- linealmente, de tal manera que el resultado es una imagen con alto
contraste al -frente- y en el -fondo-. La mejora del fondo puede conducir a que
los radiólogos identifiquen -falsos positivos-. Para probar la eficiencia del
algoritmo propuesto ejecutan un algoritmo de segmentación sobre imágenes que
fueron pasadas sobre CLAHE y sobre FCLAHE, obteniendo una mejora en el accuracy
de FCLAHE.

Dos Santos \cite{romualdopre}, \cite{dos2009mammography} propone un método para
reducir el ruido cuántico, el ruido con más presencia en imágenes mamográficas.
Utiliza la transformada de \textit{Anscombe} en conjunto con el filtro de
Wiener para reducir el ruido, además del filtro Inverso del Dominio de la
Frecuencia para mejorar las imágenes. Dado que el ruido cuántico puede ser
descrito por la distribución de Poisson se utiliza la transformada de Anscombe
para convertir este tipo de ruido en ruido aditivo que es eliminado utilizando
el filtrado Wiener. Su método fue evaluado utilizando un sistema CAD.

%\subsection{Estudios extensivos}

Ponraj y Pisano hacen estudios extensivos del estado del arte del algoritmos
utilizados para modificar imágenes mamográficas \cite{ponraj2011survey},
\cite{pisano2000image}.

La reducción del área de trabajo es estudiada por \cite{holguinpre} y
\cite{dehghani2011method}.
